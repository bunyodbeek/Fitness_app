{% extends 'base.html' %}

{% block title %}{{ body_part.name }} - Exercises{% endblock %}

{% block extra_css %}
<style>
    /* Exercises Grid */
    .exercises-grid {
        padding: 20px;
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
        gap: 15px;
        max-width: 1200px;
        margin: 0 auto;
    }

    .exercise-card {
        background: white;
        border-radius: 10px;
        overflow: hidden;
        box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        text-decoration: none;
        color: inherit;
        display: block;
        transition: transform 0.2s;
        position: relative;
    }

    .exercise-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 4px 12px rgba(0,0,0,0.2);
    }

    .exercise-image {
        width: 100%;
        height: 200px;
        object-fit: cover;
        background: #e0e0e0;
        display: block;
    }

    .exercise-placeholder {
        width: 100%;
        height: 200px;
        background: linear-gradient(135deg, #e0e0e0 0%, #c0c0c0 100%);
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 48px;
        color: #999;
    }

    .exercise-info {
        padding: 15px;
    }

    .exercise-name {
        font-size: 16px;
        font-weight: 500;
        color: #2c3e50;
        margin: 0;
        line-height: 1.4;
    }

    .favorite-icon {
        position: absolute;
        top: 10px;
        right: 10px;
        background: white;
        width: 35px;
        height: 35px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 20px;
        cursor: pointer;
        box-shadow: 0 2px 8px rgba(0,0,0,0.2);
        z-index: 10;
    }

    .favorite-icon:hover {
        transform: scale(1.1);
    }

    /* Responsive */
    @media (max-width: 768px) {
        .exercises-grid {
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 10px;
            padding: 15px;
        }

        .exercise-image,
        .exercise-placeholder {
            height: 150px;
        }

        .exercise-name {
            font-size: 14px;
        }
    }
</style>
{% endblock %}



{% block content %}
<div class="top-nav">
    <button class="back-btn" onclick="goBack()">‚Äπ</button>
    <h1>{{ body_part.name }}</h1>
    <button class="action-btn">‚≠ê</button>
</div>

<!-- Search -->
<div class="search-bar">
    <input type="text" placeholder="Mashqni qidirish..." id="searchInput">
</div>

<div class="container">
    {% if exercises %}
    <div class="exercises-grid">
        {% for exercise in exercises %}
        <a href="{% url 'exercises:exercise_detail' exercise.id %}" class="exercise-card">
            <div class="favorite-icon" onclick="event.preventDefault(); toggleFavorite({{ exercise.id }})">‚≠ê</div>
            {% if exercise.image %}
                <img src="{{ exercise.image.url }}" alt="{{ exercise.name }}" class="exercise-image">
            {% else %}
                <div class="exercise-placeholder">üí™</div>
            {% endif %}
            <div class="exercise-info">
                <h3 class="exercise-name">{{ exercise.name }}</h3>
            </div>
        </a>
        {% endfor %}
    </div>
    {% else %}
    <div class="empty-state">
        <div class="icon">üòî</div>
        <h3>Hali mashqlar qo'shilmagan</h3>
    </div>
    {% endif %}
</div>
{% endblock %}


{% block extra_js %}
<script>
    // Search functionality
    document.getElementById('searchInput').addEventListener('input', function(e) {
        const searchTerm = e.target.value.toLowerCase();
        const cards = document.querySelectorAll('.exercise-card');

        cards.forEach(card => {
            const name = card.querySelector('.exercise-name').textContent.toLowerCase();
            card.style.display = name.includes(searchTerm) ? 'block' : 'none';
        });
    });

    // Favorite toggle
    function toggleFavorite(exerciseId) {
        console.log('Favorite toggled:', exerciseId);
        // Keyinroq AJAX orqali backend'ga yuboramiz
    }
</script>
{% endblock %}